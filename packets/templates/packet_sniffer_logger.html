{% extends 'layout.html' %}
{% load staticfiles %}
{% block content %}

<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    packet sniffer and logger
    <small>strat and stoping sniffing and logging</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="/"><i class="fa fa-dashboard"></i> Home</a></li>
    <li class="active">sniffer</li>
  </ol>
</section>
<!-- Main content -->
<section class="content">
  <button type="button" class="btn btn-lg btn-success" id="start_sniffer">start sniffing and logging</button>
  <button type="button" class="btn btn-lg btn-danger" id="stop_sniffer">stop sniffing and logging</button>
  <br><br>
  <div id="startting_div">
    <div class="box box-danger">
      <div class="box-header">
        <h3 class="box-title">sniffing and logging are running</h3>
      </div>
      <!-- Loading (remove the following to stop the loading)-->
      <div class="overlay">
        <i class="fa fa-refresh fa-spin"></i>
      </div>
      <!-- end loading -->
    </div><!-- /.box -->
  </div>
</section>
<script>
// hide $#startting_div
$('#startting_div').hide();
// start packet_sniffer script
$('#start_sniffer').click(function(){
  $.ajax({
    url: '/packets/start_sniffer',
    type: 'GET',
  }).done(function (resp) {
    $('#startting_div').show();
  }).fail(function () {
    alert('fail');
  });
});
// *******************************************
// stop packet_sniffer script
$('#stop_sniffer').click(function(){
  $.ajax({
    url: '/packets/stop_sniffer',
    type: 'GET',
  }).done(function (resp) {
    $('#startting_div').hide();
  }).fail(function () {
    alert('fail');
  });
});
// ******************************************
</script>
{% endblock %}
